sudo: required

language: cpp

os:
  - linux
  - osx

dist: trusty

compiler:
  - clang
  - gcc

env:
  - CONFIGURATION=release
  - CONFIGURATION=debug

install:
  - git clone https://github.com/premake/premake-core.git
  - cd premake-core
  - git submodule init
  - git submodule update
  - make -f Bootstrap.mak $TRAVIS_OS_NAME
  - cp bin/release/premake5 ../premake5
  - cd ../

script:
  - ./premake5 gmake
  - make -C build/gmake/ config=$CONFIGURATION fmt
  - make -C build/gmake/ config=$CONFIGURATION Test
  - ./build/gmake/bin/$CONFIGURATION/Test
